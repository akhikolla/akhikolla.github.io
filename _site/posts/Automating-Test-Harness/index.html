<!DOCTYPE html><html lang="en" mode="dark" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title> Automating the TestHarness | Akhila Chowdary</title><!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" as="style" href="/assets/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/main.css"><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/popper.js@1.15.0/dist/umd/popper.min.js" integrity="sha256-fTuUgtT7O2rqoImwjrhDgbXTKUwyxxujIMRIK7TbuNU=" crossorigin> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script> window.jQuery || document.write('<script src="/assets/lib/jquery-3.4.1.min.js"><\/script>'); </script> <script src="https://cdn.jsdelivr.net/npm/popper.js@1.15.0/dist/umd/popper.min.js" integrity="sha256-fTuUgtT7O2rqoImwjrhDgbXTKUwyxxujIMRIK7TbuNU=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha256-5+02zu5UULQkO7w1GIr6vftCgMfFdZcAHeDtFnKZsBs=" crossorigin="anonymous" async></script> <script src="/assets/js/dist/commons.js" async></script> <script src="/assets/js/dist/timeago.min.js" async></script><link rel="preload" as="style" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/syntax.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/syntax.css"><link rel="preload" as="style" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css"><link rel="preload" as="script" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js"><link rel="stylesheet" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css" /> <script src="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js" async></script> <script src="/assets/js/dist/toc.min.js" async></script> <script src="/assets/js/dist/tooltip-loader.min.js" async></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/avatar.jpg" alt="avatar"> </a></div><div class="profile-text mt-3"><div id="site-title"> <a href="/">Akhila Chowdary</a></div><div id="site-subtitle" class="font-italic">RcppDeepState.</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-3 mr-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-3 mr-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-3 mr-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-3 mr-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-3 mr-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <a href="https://github.com/akhikolla" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="javascript:window.open('mailto:' + ['akhilakollasrinu424jf','gmail.com'].join('@'))"> <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" target="_blank"> <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Automating the TestHarness</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Automating the TestHarness</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <span class="timeago" data-toggle="tooltip" data-placement="bottom" title="Fri, Apr 17, 2020, 12:00 AM -0700"> Apr 17, 2020 <i class="unloaded">2020-04-17T00:00:00-07:00</i> </span> by <span class="author"> Akhila Chowdary Kolla </span></div></div><div class="post-content"><p><strong>RcppDeepState testharness for binsegRcpp package using RInisde</strong></p><p>In this blog, I’ll be explaining the process of automating the testharness and integrating Rcpp with deepstate. This blog is a continuation of my previous blog explaining the idea of working with deepstate in R.</p><p>If you want to know more about embedding a C program with R you can refer to <a href="https://tdhock.github.io/blog/2020/embedded-R/">Embedding_R</a>. Also, if you want to dig deeper and link functions of the Rcpp package with a main function in an external C++ file using RInside you can check <a href="https://tdhock.github.io/blog/2020/binsegRcppInside/">binsegRcpp_inside_C++_code</a>.</p><p><strong>Integrating deepstate with Rcpp using RInside</strong></p><p>To use RInside in any program first we need to create an Instance of RInside class, which represents an embedded R interpreter in that particular C/C++ program. RInside package is designed in such a way to make it easier to embed R in a C++ class. Using RInside in a C++ code follow 2 easy steps:</p><p><strong><em>Including the RInside header</em></strong></p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;RInside.h&gt;
</span></pre></table></code></div></div><p><strong><em>Creating an Instance of R</em></strong></p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">RInside</span> <span class="nf">R</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="n">argv</span><span class="p">);</span>
</pre></table></code></div></div><p>Here argc, argv are arguments of the main function. As we don’t have a main function in a testharness, we can just declare argc,argv, and make a call to R. Deepstate runs the test harness with a main function automatically at runtime.</p><p><strong><em>Generation of TestHarness</em></strong></p><p>I created a function that generates testharness based on the information taken from the RcppExports file in the package.</p><p><code class="language-plaintext highlighter-rouge">RcppDeepState::deepstate_harness_create("package_path")</code> is a function that takes path of the package and generates a testharness for each function declared in the package.  </p><p><code class="language-plaintext highlighter-rouge">deepstate_harness_create()</code> has the script to filter the RcppExports for function prototypes, Number of functions, Number of arguments for each function, and their names in the package.It also generates corresponding makefiles for the testharnesses.</p><p>For example, if you want to run this function on the <code class="language-plaintext highlighter-rouge">binsegRcpp</code> package, use below line of code.</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c1">//Here ~/R/binsegRcpp path of binsegRcpp </span>
<span class="n">deepstate_harness_create</span><span class="p">(</span><span class="s">"~/R/binsegRcpp"</span><span class="p">)</span> 
</pre></table></code></div></div><p>This function makes a call to following functions</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="n">deepstate_harness_create</span><span class="p">(</span><span class="n">package_path</span><span class="p">){</span>

<span class="c1">//gives list of functions and their arguments in the package</span>
<span class="n">binseg</span><span class="p">.</span><span class="n">list</span> <span class="o">&lt;-</span> <span class="n">get_fun_body</span><span class="p">(</span><span class="n">package_path</span><span class="p">)</span> 

<span class="c1">//gives the prototypes of the functions in the package</span>
<span class="err"> </span> <span class="n">prototypes</span> <span class="o">&lt;-</span><span class="n">get_prototype_of_functions</span><span class="p">(</span><span class="n">package_path</span><span class="p">)</span>
 
 <span class="c1">//script to generate Testharness</span>
 
 <span class="c1">//creates make files for the generated testharness</span>
 <span class="n">create_makefile</span><span class="p">(</span><span class="n">generatedTestharnessname</span><span class="p">)</span>
<span class="p">}</span>
</pre></table></code></div></div><p>The obtained lists from the functions are filtered and placed accordingly in the Testharness.You can refer to the function <a href="https://github.com/akhikolla/RcppDeepState/blob/master/CreateRcppTestharness.R">deepstate_harness_create</a> here to understand in detail.</p><p>In RcppDeepState, we have created the RcppDeepState.h header file in RcppDeepState/inst/include where all of the RcppDeepState_* function definitions are present, usually, header files placed in inst/include are considered to be in the root directory and can be accessed easily. Link to <a href="https://github.com/akhikolla/RcppDeepState/tree/master/RcppDeepState/inst/include">RcppDeepState/inst/include</a></p><p>In the header file, we have the member functions to generate randomized vectors for that particular datatype. There is a detailed description of generating these random functions in my <a href="https://akhilakolla.github.io/posts/RcppDeepState-Introduction/">previous blog</a></p><p><strong>What happens inside the testharness?</strong></p><p>First, It will include two header files one is <code class="language-plaintext highlighter-rouge">RInside.h</code> which provides all the necessary functions to embed R with C++ and the second is <code class="language-plaintext highlighter-rouge">RcppDeepState.h</code> as it has the randomized vector definitions which will be used in the testharness.</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;RInside.h&gt;
#include &lt;RcppDeepState.h&gt; 
</span></pre></table></code></div></div><p>binsegRcpp package has two functions with the following prototypes and both the functions accept two input arguments: an IntegerVector and a NumericVector.  </p><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">Rcpp</span><span class="o">::</span><span class="n">List</span><span class="w"> </span><span class="n">rcpp_binseg_normal</span><span class="p">(</span><span class="n">Rcpp</span><span class="o">::</span><span class="n">NumericVector</span><span class="p">,</span><span class="w"> </span><span class="n">Rcpp</span><span class="o">::</span><span class="n">IntegerVector</span><span class="p">);</span><span class="w">
</span><span class="n">Rcpp</span><span class="o">::</span><span class="n">List</span><span class="w"> </span><span class="n">rcpp_binseg_normal_cost</span><span class="p">(</span><span class="n">Rcpp</span><span class="o">::</span><span class="n">NumericVector</span><span class="p">,</span><span class="w"> </span><span class="n">Rcpp</span><span class="o">::</span><span class="n">IntegerVector</span><span class="p">);</span><span class="w">
</span></pre></table></code></div></div><p>As we are generating the testharness for rcpp_binseg_normal. It will declare the prototype of this function in the testharness for the compiler to recognize it.</p><p>TEST macro is always written inside a Testharness. This TEST macro will take the unit test name and test name as arguments. For each function in the package binsegRcpp, a testharness is created.</p><p>Let’s see an example of testharness for rcpp_binseg_normal() (one of the functions in binsegRcpp).</p><p>For rcpp_binseg_normal(), binseg_normal_DeepState_TestHarness.cpp is the name of the testharness. The unit test name is binseg_normal_name_randomdatatypes which is the first argument for the TEST macro, The test name is binseg_normal_name_test which is the second argument for the TEST macro</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">TEST</span> <span class="p">(</span><span class="n">binseg_normal_randomdatatypes</span><span class="p">,</span><span class="n">rcpp_binseg_normal_test</span><span class="p">){</span>
<span class="c1">//test harness code</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Inside the test macro, it will declare two variables <code class="language-plaintext highlighter-rouge">argc,argv</code>.</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="n">argc</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">;</span> 
</pre></table></code></div></div><p>Now it will create an instance of RInside by passing the above-declared variables as arguments which will help to embed R with C++.</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">RInside</span> <span class="nf">R</span><span class="p">(</span><span class="n">argv</span><span class="p">,</span><span class="n">argc</span><span class="p">);</span>
</pre></table></code></div></div><p>Now as we need to test rcpp_binseg_normal we need two data vectors. These data vectors are randomly generated by making a call to the randomized vector functions of <code class="language-plaintext highlighter-rouge">RcppDeepState.h</code> header file.</p><p>The below code explains how those function calls are being made. A call to RcppDeepState_NumericVector is made and it returns a random numericvector whose values are stored in data_vec, and a call to RcppDeepState_IntegerVector is made and it returns a random IntegerVector whose values are stored in max_segments.</p><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">Rcpp</span><span class="o">::</span><span class="n">NumericVector</span><span class="w"> </span><span class="n">data_vec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RcppDeepState_NumericVector</span><span class="p">();</span><span class="w">
</span><span class="n">Rcpp</span><span class="o">::</span><span class="n">IntegerVector</span><span class="w"> </span><span class="n">max_segments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RcppDeepState_IntegerVector</span><span class="p">();</span><span class="w">
</span></pre></table></code></div></div><p>Now, these data_vec, max_segments with randomized values are passed to rcpp_binseg_normal.The below code makes a call to the rcpp_binseg_normal function in binsegRcpp package.  </p><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">rcpp_binseg_normal</span><span class="p">(</span><span class="n">data_vec</span><span class="p">,</span><span class="w"> </span><span class="n">max_segments</span><span class="p">);</span><span class="w">
</span></pre></table></code></div></div><p><strong>binseg_normal_DeepState_TestHarness.cpp</strong></p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="c1">//including the necessary headers</span>
<span class="cp">#include &lt;RInside.h&gt;
#include &lt;RcppDeepState.h&gt; 
</span>
<span class="c1">//declaring the prototype of the function for the compiler to recognize it. </span>
<span class="n">Rcpp</span><span class="o">::</span><span class="n">List</span> <span class="nf">rcpp_binseg_normal</span><span class="p">(</span><span class="k">const</span> <span class="n">Rcpp</span><span class="o">::</span><span class="n">NumericVector</span> <span class="n">data_vec</span><span class="p">,</span> <span class="k">const</span> <span class="n">Rcpp</span><span class="o">::</span><span class="n">IntegerVector</span> <span class="n">max_segments</span><span class="p">);</span>

<span class="c1">//defining the test macro</span>
<span class="n">TEST</span> <span class="p">(</span><span class="n">binseg_normal_randomdatatypes</span><span class="p">,</span><span class="n">rcpp_binseg_normal_test</span><span class="p">)</span>
<span class="p">{</span>
<span class="c1">//declare commandline arguments as there is no main function at this time in the code</span>
<span class="kt">int</span> <span class="n">argc</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">;</span> 

<span class="c1">//calling instance of R</span>
<span class="n">RInside</span> <span class="n">R</span><span class="p">(</span><span class="n">argv</span><span class="p">,</span><span class="n">argc</span><span class="p">);</span>

<span class="c1">//making a call to randomized vector methods of class RcppDeepState and storing the return values</span>
<span class="n">Rcpp</span><span class="o">::</span><span class="n">NumericVector</span> <span class="n">data_vec</span> <span class="o">=</span><span class="n">RcppDeepState_NumericVector</span><span class="p">();</span>
<span class="n">Rcpp</span><span class="o">::</span><span class="n">IntegerVector</span> <span class="n">max_segments</span> <span class="o">=</span><span class="n">RcppDeepState_IntegerVector</span><span class="p">();</span>

<span class="c1">//making a call to rcpp_binseg_normal passing those random values</span>
<span class="n">rcpp_binseg_normal</span><span class="p">(</span><span class="n">data_vec</span><span class="p">,</span> <span class="n">max_segments</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>For the code to compile first we need to install the binsegRcpp package in the system. After the installation, binsegRcpp/src has the compiled object files which are used during the compilation of testharness.You can find <a href="https://github.com/tdhock/binsegRcpp/blob/master/src/rcpp_interface.cpp">binsegRcpp_package</a> here.</p><p>To compile the test harness of rcpp_binseg_normal(), we require a Makefile. The same deepstate_harness_create() will make a call to create_makefile() function which creates the respective makefile for the testharness. In our case, it created <code class="language-plaintext highlighter-rouge">rcpp_binseg_normal.Makefile</code></p><p>The below snippet shows what happens when we run the code without any fuzzer. if we run the code without any fuzzer it will execute the test case with default values for the respective datatypes. Example: The default value of Integer is 0 and Numeric is 0.0</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="n">akhila</span><span class="err">@</span><span class="n">akhila</span><span class="o">-</span><span class="n">VirtualBox</span><span class="o">:~/</span><span class="n">R</span><span class="err">$</span> <span class="n">rm</span> <span class="o">-</span><span class="n">f</span> <span class="o">*</span><span class="p">.</span><span class="n">o</span> <span class="o">&amp;&amp;</span> <span class="n">make</span> <span class="o">-</span><span class="n">f</span> <span class="n">binsegnormal</span><span class="p">.</span><span class="n">Makefile</span> <span class="n">binseg_normal_DeepState_TestHarness</span>
<span class="n">clang</span><span class="o">++</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">include</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">deepstate</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">include</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">library</span><span class="o">/</span><span class="n">Rcpp</span><span class="o">/</span><span class="n">include</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">library</span><span class="o">/</span><span class="n">RInside</span><span class="o">/</span><span class="n">include</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span> <span class="n">binseg_normal_DeepState_TestHarness</span><span class="p">.</span><span class="n">cpp</span> <span class="o">-</span><span class="n">o</span> <span class="n">binseg_normal_DeepState_TestHarness</span><span class="p">.</span><span class="n">o</span> <span class="o">-</span><span class="n">c</span>
<span class="n">clang</span><span class="o">++</span> <span class="o">-</span><span class="n">o</span> <span class="n">binseg_normal_DeepState_TestHarness</span> <span class="n">binseg_normal_DeepState_TestHarness</span><span class="p">.</span><span class="n">o</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">include</span><span class="o">/</span> <span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">library</span><span class="o">/</span><span class="n">RInside</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">rpath</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">library</span><span class="o">/</span><span class="n">RInside</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">rpath</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">deepstate</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">rpath</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">deepstate</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">lR</span> <span class="o">-</span><span class="n">lRInside</span> <span class="o">-</span><span class="n">ldeepstate</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">binsegRcpp</span><span class="o">/</span><span class="n">src</span><span class="o">/*</span><span class="p">.</span><span class="n">o</span>
<span class="p">.</span><span class="o">/</span><span class="n">binseg_normal_DeepState_TestHarness</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="n">Running</span><span class="o">:</span> <span class="n">binseg_normal_randomdatatypes_rcpp_binseg_normal_test</span> <span class="n">from</span> <span class="n">binseg_normal_DeepState_TestHarness</span><span class="p">.</span><span class="n">cpp</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">INFO</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="o">:</span> <span class="n">before</span> <span class="n">declaration</span>
<span class="n">INFO</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span><span class="o">:</span> <span class="n">after</span> <span class="n">assignment</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span><span class="o">:</span> 
<span class="n">index</span><span class="o">:</span> <span class="mi">0</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="mf">0.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span><span class="o">:</span> 
<span class="n">index</span><span class="o">:</span> <span class="mi">1</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="mf">0.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span><span class="o">:</span> 
<span class="n">index</span><span class="o">:</span> <span class="mi">2</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="mf">0.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span><span class="o">:</span> 
<span class="n">index</span><span class="o">:</span> <span class="mi">3</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="mf">0.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span><span class="o">:</span> 
<span class="n">index</span><span class="o">:</span> <span class="mi">4</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="mf">0.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="n">Passed</span><span class="o">:</span> <span class="n">binseg_normal_randomdatatypes_rcpp_binseg_normal_test</span>
</pre></table></code></div></div><p>Breaking down the lines in the Makefile, the compilation has 3 steps</p><p><strong>Compiling step:</strong></p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">clang</span><span class="o">++</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">include</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">deepstate</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">include</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">library</span><span class="o">/</span><span class="n">Rcpp</span><span class="o">/</span><span class="n">include</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">library</span><span class="o">/</span><span class="n">RInside</span><span class="o">/</span><span class="n">include</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span> <span class="n">binseg_normal_DeepState_TestHarness</span><span class="p">.</span><span class="n">cpp</span> <span class="o">-</span><span class="n">o</span> <span class="n">binseg_normal_DeepState_TestHarness</span><span class="p">.</span><span class="n">o</span> <span class="o">-</span><span class="n">c</span>
</pre></table></code></div></div><p>Here we include all the libraries that are necessary to compile the code, COMMON_FLAGS have list of libraries that are to be included at the time of compiling the code</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">COMMON_FLAGS</span><span class="o">=</span><span class="n">binseg_normal_DeepState_TestHarness</span><span class="p">.</span><span class="n">o</span> <span class="err"> </span><span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span> <span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">library</span><span class="o">/</span><span class="n">RInside</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">rpath</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">library</span><span class="o">/</span><span class="n">RInside</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">L</span><span class="err">$</span><span class="p">{</span><span class="n">R_HOME</span><span class="p">}</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">rpath</span><span class="o">=</span><span class="err">$</span><span class="p">{</span><span class="n">R_HOME</span><span class="p">}</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">deepstate</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">rpath</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">deepstate</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">lR</span> <span class="o">-</span><span class="n">lRInside</span> <span class="o">-</span><span class="n">ldeepstate</span>
</pre></table></code></div></div><p><strong>Linking step:</strong></p><p>We link the compiled testharness in the above step with the object file of the functions as follows:</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">clang</span><span class="o">++</span> <span class="o">-</span><span class="n">o</span> <span class="n">binseg_normal_DeepState_TestHarness</span> <span class="n">binseg_normal_DeepState_TestHarness</span><span class="p">.</span><span class="n">o</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span> <span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">library</span><span class="o">/</span><span class="n">RInside</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">rpath</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">library</span><span class="o">/</span><span class="n">RInside</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">rpath</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">deepstate</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">rpath</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">deepstate</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">lR</span> <span class="o">-</span><span class="n">lRInside</span> <span class="o">-</span><span class="n">ldeepstate</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">binsegRcpp</span><span class="o">/</span><span class="n">src</span><span class="o">/*</span><span class="p">.</span><span class="n">o</span>
</pre></table></code></div></div><p><strong>Running the Code:</strong></p><p>In the rcpp_binsegnormal.Makefile we didn’t specify the executable to run with fuzzers, resulting in default values being passed on the function. If we want to run the executable with fuzzer all we have to do is add the <code class="language-plaintext highlighter-rouge">--fuzz</code> argument to the executable.</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="p">.</span><span class="o">/</span><span class="n">binseg_normal_DeepState_TestHarness</span> <span class="err">–</span><span class="n">fuzz</span>
</pre></table></code></div></div><p>Using <code class="language-plaintext highlighter-rouge">—fuzz</code> argument during the runtime helps us get the randomized fuzzing inputs to be passed on to the executable. If you want to see those fuzzing inputs on the console you can just add <code class="language-plaintext highlighter-rouge">–min_level_log 0</code> argument. The <code class="language-plaintext highlighter-rouge">min_log_level</code> argument controls the way inputs are displayed on the console while fuzzing.</p><p>Running the executable with <code class="language-plaintext highlighter-rouge">fuzz</code> and <code class="language-plaintext highlighter-rouge">min_level_log</code> arguments :</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="n">akhila</span><span class="err">@</span><span class="n">akhila</span><span class="o">-</span><span class="n">VirtualBox</span><span class="o">:~/</span><span class="n">R</span><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="n">binseg_normal_DeepState_TestHarness</span> <span class="o">--</span><span class="n">fuzz</span> <span class="o">--</span><span class="n">min_log_level</span> <span class="mi">0</span>
<span class="n">INFO</span><span class="o">:</span> <span class="n">Starting</span> <span class="n">fuzzing</span>
<span class="n">WARNING</span><span class="o">:</span> <span class="n">No</span> <span class="n">seed</span> <span class="n">provided</span><span class="p">;</span> <span class="k">using</span> <span class="mi">1588038306</span>
<span class="n">WARNING</span><span class="o">:</span> <span class="n">No</span> <span class="n">test</span> <span class="n">specified</span><span class="p">,</span> <span class="n">defaulting</span> <span class="n">to</span> <span class="n">first</span> <span class="n">test</span> <span class="n">defined</span> <span class="p">(</span><span class="n">binseg_normal_randomdatatypes_rcpp_binseg_normal_test</span><span class="p">)</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="n">Running</span><span class="o">:</span> <span class="n">binseg_normal_randomdatatypes_rcpp_binseg_normal_test</span> <span class="n">from</span> <span class="n">binseg_normal_DeepState_TestHarness</span><span class="p">.</span><span class="n">cpp</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">INFO</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="o">:</span> <span class="n">before</span> <span class="n">declaration</span>
<span class="n">INFO</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span><span class="o">:</span> <span class="n">after</span> <span class="n">assignment</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span><span class="o">:</span> 
<span class="n">index</span><span class="o">:</span> <span class="mi">0</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="o">-</span><span class="mf">12563812741723733078733884073387044629005491060075677258726713056417780995798020336653792386553526424619637830649583857521090658230996187146232755069113565923454666543942553438502052028584808990707067614737351070834911295195278791062329372854128548541690368660149302893900452908812991244328340473551832219648.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span><span class="o">:</span> 
<span class="n">index</span><span class="o">:</span> <span class="mi">1</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="mf">0.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span><span class="o">:</span> 
<span class="n">index</span><span class="o">:</span> <span class="mi">2</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="mf">0.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span><span class="o">:</span>
<span class="err"> </span><span class="n">index</span><span class="o">:</span> <span class="mi">3</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="o">-</span><span class="mf">59112322608599703552.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span><span class="o">:</span> 
<span class="n">index</span><span class="o">:</span> <span class="mi">4</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="mf">0.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="n">Passed</span><span class="o">:</span> <span class="n">binseg_normal_randomdatatypes_rcpp_binseg_normal_test</span> 
</pre></table></code></div></div><p>TestHarness is created, compiled, and executed the same for rcpp_binseg_normal_cost() in the package.Similarly the same is carried for every function present in that package.</p><p>After running the executable with fuzz we get the count of passed and failed testcases:</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nl">INFO:</span> <span class="n">Done</span> <span class="n">fuzzing</span><span class="o">!</span> <span class="n">Ran</span> <span class="mi">166</span> <span class="n">tests</span> <span class="p">(</span><span class="mi">1</span> <span class="n">tests</span><span class="o">/</span><span class="n">second</span><span class="p">)</span> <span class="n">with</span> <span class="mi">87</span> <span class="n">failed</span><span class="o">/</span><span class="mi">79</span> <span class="n">passed</span><span class="o">/</span><span class="mi">0</span> <span class="n">abandoned</span> <span class="n">tests</span>
</pre></table></code></div></div><p>Here 166 testcases are ran but only 79 of them passed and 87 failed.</p><p>Failing of binsegRcpp::rcpp_binseg_normal() include following conditions: rcpp_binseg_normal throws errors in 3 cases. All of these errors are particularized previously in the function.</p><p><strong>Case 1:</strong> if size of data_vec is less than 1 - it throws NO_DATA error.</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="nl">TRACE:</span> <span class="nl">Running:</span> <span class="n">binseg_normal_randomdatatypes_rcpp_binseg_normal_test</span> <span class="n">from</span> <span class="n">binseg_normal_DeepState_TestHarness</span><span class="p">.</span><span class="n">cpp</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="n">INFO</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="o">:</span> <span class="n">size</span> <span class="n">of</span> <span class="n">numeric</span> <span class="n">vector</span> <span class="mi">0</span>
<span class="n">INFO</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">26</span><span class="p">)</span><span class="o">:</span> <span class="n">size</span> <span class="n">of</span> <span class="n">integer</span> <span class="n">vector</span> <span class="mi">7</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">0</span> <span class="n">rand_Integer</span> <span class="n">vector</span><span class="o">:</span> <span class="mi">0</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">1</span> <span class="n">rand_Integer</span> <span class="n">vector</span><span class="o">:</span> <span class="mi">0</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">2</span> <span class="n">rand_Integer</span> <span class="n">vector</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">3</span> <span class="n">rand_Integer</span> <span class="n">vector</span><span class="o">:</span> <span class="mi">5</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">4</span> <span class="n">rand_Integer</span> <span class="n">vector</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">5</span> <span class="n">rand_Integer</span> <span class="n">vector</span><span class="o">:</span> <span class="mi">5</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">6</span> <span class="n">rand_Integer</span> <span class="n">vector</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">terminate</span> <span class="n">called</span> <span class="n">after</span> <span class="n">throwing</span> <span class="n">an</span> <span class="n">instance</span> <span class="n">of</span> <span class="err">'</span><span class="n">Rcpp</span><span class="o">::</span><span class="n">exception</span><span class="err">'</span>
  <span class="n">what</span><span class="p">()</span><span class="o">:</span>  <span class="n">no</span> <span class="n">data</span>
<span class="n">ERROR</span><span class="o">:</span> <span class="n">Failed</span><span class="o">:</span> <span class="n">binseg_normal_randomdatatypes_rcpp_binseg_normal_test</span>
</pre></table></code></div></div><p>Here the first line represents the trace of running the unit test binseg_normal_randomdatatypes for the test name binseg_normal_test from the binseg_normal_DeepState_TestHarness.cpp file. The next line gives the size of data_vec. The next 8 lines give the size of the max_segments and the values assigned to it. As the size of data_vec is zero system throws <code class="language-plaintext highlighter-rouge">Rcpp:: exception - no data</code></p><p><strong>Case 2:</strong> When deepstate passes max_segments value less than 1 - it throws NO_SEGMENTS error.</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nl">TRACE:</span> <span class="nl">Running:</span> <span class="n">binseg_normal_randomdatatypes_rcpp_binseg_normal_test</span> <span class="n">from</span> <span class="n">binseg_normal_DeepState_TestHarness</span><span class="p">.</span><span class="n">cpp</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="n">INFO</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="o">:</span> <span class="n">size</span> <span class="n">of</span> <span class="n">numeric</span> <span class="n">vector</span> <span class="mi">3</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">0</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="mf">0.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">1</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="o">-</span><span class="mf">0.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">2</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="o">-</span><span class="mf">549597172537956305361476352992032084967034120685391253548321674087287542206259282924505133616777038420141334167021856546111699614438625352540376419326680499753137951174060529473856821415788016811851287442002018219512838717832056589714313327622732747428243813670070517760.000000</span>
<span class="n">INFO</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">26</span><span class="p">)</span><span class="o">:</span> <span class="n">size</span> <span class="n">of</span> <span class="n">integer</span> <span class="n">vector</span> <span class="mi">1</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">0</span> <span class="n">rand_Integer</span> <span class="n">vector</span><span class="o">:</span> <span class="mi">0</span>
<span class="n">terminate</span> <span class="n">called</span> <span class="n">after</span> <span class="n">throwing</span> <span class="n">an</span> <span class="n">instance</span> <span class="n">of</span> <span class="err">'</span><span class="n">Rcpp</span><span class="o">::</span><span class="n">exception</span><span class="err">'</span>
  <span class="n">what</span><span class="p">()</span><span class="o">:</span>  <span class="n">no</span> <span class="n">segments</span>
<span class="n">ERROR</span><span class="o">:</span> <span class="n">Failed</span><span class="o">:</span> <span class="n">binseg_normal_randomdatatypes_rcpp_binseg_normal_test</span>
</pre></table></code></div></div><p>Here the first line represents the trace of running the unit test binseg_normal_randomdatatypes for the test name binseg_normal_test from the binseg_normal_DeepState_TestHarness.cpp file. The next 6 lines give the size of data_vec and values present in it. The next line gives the size of the max_segments and the values assigned to it. Here we encountered <code class="language-plaintext highlighter-rouge">Rcpp::Exception no segments</code> error because max_segments values are less than one</p><p><strong>Case 3:</strong> when deepstate passes size of data_vec is less than the value in max_segments - it throws TOO_MANY_SEGMENTS error.</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nl">TRACE:</span> <span class="nl">Running:</span> <span class="n">binseg_normal_randomdatatypes_rcpp_binseg_normal_test</span> <span class="n">from</span> <span class="n">binseg_normal_DeepState_TestHarness</span><span class="p">.</span><span class="n">cpp</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="n">INFO</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="o">:</span> <span class="n">size</span> <span class="n">of</span> <span class="n">numeric</span> <span class="n">vector</span> <span class="mi">2</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">0</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="mf">6485702193556522171471109734302530991973990400.000000</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">1</span> <span class="n">rand_numeric</span> <span class="n">vector</span><span class="o">:</span> <span class="mf">0.000000</span>
<span class="n">INFO</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">26</span><span class="p">)</span><span class="o">:</span> <span class="n">size</span> <span class="n">of</span> <span class="n">integer</span> <span class="n">vector</span> <span class="mi">2</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">0</span> <span class="n">rand_Integer</span> <span class="n">vector</span><span class="o">:</span> <span class="mi">3</span>
<span class="n">TRACE</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">akhila</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="o">/</span><span class="n">inst</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">RcppDeepState</span><span class="p">.</span><span class="n">h</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="o">:</span> <span class="mi">1</span> <span class="n">rand_Integer</span> <span class="n">vector</span><span class="o">:</span> <span class="mi">4</span>
<span class="n">terminate</span> <span class="n">called</span> <span class="n">after</span> <span class="n">throwing</span> <span class="n">an</span> <span class="n">instance</span> <span class="n">of</span> <span class="err">'</span><span class="n">Rcpp</span><span class="o">::</span><span class="n">exception</span><span class="err">'</span>
  <span class="n">what</span><span class="p">()</span><span class="o">:</span>  <span class="n">too</span> <span class="n">many</span> <span class="n">segments</span>
<span class="n">ERROR</span><span class="o">:</span> <span class="n">Failed</span><span class="o">:</span> <span class="n">binseg_normal_randomdatatypes_rcpp_binseg_normal_test</span>
</pre></table></code></div></div><p>Here the first line represents the trace of running the unit test binseg_normal_randomdatatypes for the test name binseg_normal_test from the binseg_normal_DeepState_TestHarness.cpp file. The next 3 lines give the size of data_vec and values present in it. The next 3 lines gives the size of the max_segments and the values assigned to it. Here we encountered <code class="language-plaintext highlighter-rouge">Rcpp::Exception too many segments</code> error because max_segments value is greater than the size of data_vec.</p><p>Considering the above conditions, for rcpp_binseg_normal to run without throwing any expected errors we can handle those errors with the help of try and catch block.</p><p>These expected errors can be handled by placing a try-catch block around the function call rcpp_binseg_normal() inside the testharness. While running the above code block when the Rcpp::exception is thrown the catcher recognizes and handles it as std::exception, which is the base class for all the exceptions.</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">try</span><span class="p">{</span>
<span class="n">rcpp_binseg_normal</span><span class="p">(</span><span class="n">data_vec</span><span class="p">,</span> <span class="n">max_segments</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">catch</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">exception</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">){</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Exception Handled"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>The above code handles the exceptions generated by the testharness which will continue the execution of the testharness without failing it.</p><p>Thanks to <a href="https://tdhock.github.io/blog/">Dr.Toby Dylan Hocking</a> for his support. This blog is kindly contributed to <a href="https://www.r-bloggers.com/">R-bloggers</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/rcppdeepstate/'>RcppDeepState</a> , <a href='/categories/automate-test-harness/'>Automate Test Harness</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/testharness/" class="post-tag no-text-decoration" >TestHarness</a> <a href="/tags/r/" class="post-tag no-text-decoration" >R</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center pt-5 pb-2"> <!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Automating the TestHarness - Akhila Chowdary&url=http://localhost:4000/posts/Automating-Test-Harness/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Automating the TestHarness - Akhila Chowdary&u=http://localhost:4000/posts/Automating-Test-Harness/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Automating the TestHarness - Akhila Chowdary&url=http://localhost:4000/posts/Automating-Test-Harness/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Rcpp-Packages-Limited-FuzzTesting/">Rcpp Packages Limited Fuzz Testing</a></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <!-- The trending tags list v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung MIT Licensed --> <a class="post-tag" href="/tags/r/">R</a> <a class="post-tag" href="/tags/valgrindtest/">ValgrindTest</a> <a class="post-tag" href="/tags/testings/">Testings</a> <a class="post-tag" href="/tags/testharness/">TestHarness</a> <a class="post-tag" href="/tags/rcppdeepstate/">RcppDeepState</a> <a class="post-tag" href="/tags/prototyping/">Prototyping</a> <a class="post-tag" href="/tags/fuzztesting/">FuzzTesting</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-3">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="post-extend-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/RcppDeepState-Introduction/" class="btn btn-outline-primary"><p>RcppDeepState</p></a> <a href="/posts/Testing-Rcpp-Packages/" class="btn btn-outline-primary"><p>Testing Rcpp packages</p></a></div><!-- The related posts of current post. Placed in the bottom of every single post. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-4 mb-2 mb-sm-4 pb-2"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/RcppDeepState-Introduction/"><div class="card-body"> <span class="timeago small"> Feb 27, 2020 <i class="unloaded">2020-02-27T00:00:00-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>RcppDeepState</h3><div class="text-muted small"><p>This Blog gives you an understanding of Fuzzing, why it is important and what are the things that you should have prior knowledge about, before starting on DeepState and it’s usage on Rcpp packages...</p></div></div></a></div><div class="card"> <a href="/posts/Testing-Rcpp-Packages/"><div class="card-body"> <span class="timeago small"> Jun 24, 2020 <i class="unloaded">2020-06-24T00:00:00-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Testing Rcpp packages</h3><div class="text-muted small"><p>Testing Rcpp packages using DeepState and Valgrind Testing Rcpp packages for memory violations can be tricky. The C++ code embedded inside an Rcpp function can introduce subtle bugs. These bugs c...</p></div></div></a></div><div class="card"> <a href="/posts/Rcpp-Packages-Limited-FuzzTesting/"><div class="card-body"> <span class="timeago small"> Aug 30, 2020 <i class="unloaded">2020-08-30T00:00:00-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Rcpp Packages Limited Fuzz Testing</h3><div class="text-muted small"><p>Background Testing a software application is always a tough job and time-consuming. To successfully identify bugs in your package we need to consider the following: Randomized Inputs. Code C...</p></div></div></a></div></div></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const observer = lozad(); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2020 <a href="https://twitter.com/username">Akhila Chowdary Kolla</a>.</p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted">Trending Tags</h4><!-- The trending tags list v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung MIT Licensed --> <a class="post-tag" href="/tags/r/">R</a> <a class="post-tag" href="/tags/valgrindtest/">ValgrindTest</a> <a class="post-tag" href="/tags/testings/">Testings</a> <a class="post-tag" href="/tags/testharness/">TestHarness</a> <a class="post-tag" href="/tags/rcppdeepstate/">RcppDeepState</a> <a class="post-tag" href="/tags/prototyping/">Prototyping</a> <a class="post-tag" href="/tags/fuzztesting/">FuzzTesting</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js" integrity="sha256-qcLR00zq6pJk4je3MLgAri8Nn+ZumUlXgTKR2H/xCY0=" crossorigin="anonymous"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="http://localhost:4000{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
